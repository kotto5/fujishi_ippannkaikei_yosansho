# 次のAgentへの引き継ぎ指示

## タスク概要
富士市の一般会計予算書をデータ化するプロジェクトです。
背景として、富士市の一般会計予算書はPDFで配布されており、データ分析がしづらい状態になっています。そのため、まずはのデータを分析可能な形に変換することを目的としています。

## 具体的なステップ：
1. PDFからのデータをJSONに変換します。
2. json_to_csv.pyを使用して、JSONのデータをCSVに置換します。
3. 開発者がCSVのデータをスプレッドシートにインポートすることで、分析を可能にします。

## 注意点


## ファイルの場所
- JSON: `/home/claude/json/歳出_*.json` （14ファイル、要置換）
- CSV: `/home/claude/csv/歳出_*.csv` （14ファイル、JSON再生成後に再変換）
- JSON→CSV変換: `/home/claude/json_to_csv.py`
- 完成済み歳入例: `/home/claude/json/歳入_市税.json`

## JSONフォーマット
```json
{
  "sheet_name": "歳出_議会費",
  "data": [
    ["議会費", null, null, null, null, 481596, 499446],   // 款行: [款名, null, null, null, null, R6, R7]
    [null, "議会費", null, null, null, 481596, 499446],    // 項行: [null, 項名, null, null, null, R6, R7]
    [null, null, "議会費", null, null, 481596, 499446],    // 目行: [null, null, 目名, null, null, R6, R7]
    [null, null, null, "報酬", null, null, 205923],        // 節行: [null, null, null, 節名, null, null, R7]
    [null, null, null, null, "議長等議員報酬", null, 205923] // 説明行: [null, null, null, null, 説明, null, R7]
  ]
}
```
各行は `[款, 項, 目, 節, 説明, R6, R7]` の7要素配列。該当レベル以外はnull。

## CSV出力フォーマット
```
款,項,目,節,説明,R6,R7
議会費,,,,,481596,499446
,議会費,,,,481596,499446
,,議会費,,,481596,499446
,,,報酬,,,205923
,,,,議長等議員報酬,,205923
```
- UTF-8（BOMなし）、LF改行
- 金額は千円単位、カンマ区切りなし

## データソース
富士市のサイト: https://www.city.fuji.shizuoka.jp/documents/7863/hngtkl000000jj0q_1.pdf
（600ページ超の完全版予算書。歳出事項別明細書は中盤〜後半に収録）

**重要**: スキャンPDFではなく、テキスト埋め込みPDFを使うこと。上記URLの原本はテキスト型。

## 作業手順
1. PDFから歳出事項別明細書のテキストを抽出
2. 各款ごとにJSONファイルを作成（上記フォーマット準拠）
3. ./json_to_csv.py でCSV一括再生成
4. 合計値の検証

## 注意点
- 前回PDF全体を一度にfetchした際、トークン上限で歳出部分が欠落した
- 款ごとまたは数款ずつ処理すること
- 歳出の節は歳入と異なり、1報酬 2給料 3職員手当等 ... のような番号付き科目体系
- 説明欄には事業名と金額の内訳が記載される
